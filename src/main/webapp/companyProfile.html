<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <link rel="shortcut icon" href="img/logo.png">

        <title>Afw Profile Page</title>

        <!-- Bootstrap core CSS -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/bootstrap-reset.css" rel="stylesheet">

        <!--Animation css-->
        <link href="css/animate.css" rel="stylesheet">

        <!-- sweet alerts -->
        <link href="assets/sweet-alert/sweet-alert.min.css" rel="stylesheet">

        <!--Icon-fonts css-->
        <link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
        <link href="assets/ionicon/css/ionicons.min.css" rel="stylesheet" />


        <!-- Custom styles for this template -->
        <link href="css/style.css" rel="stylesheet">
        <link href="css/helper.css" rel="stylesheet">
        
        <!-- Datepicker css -->
        <link href="assets/timepicker/bootstrap-datepicker.min.css" rel="stylesheet" />
        
        <!-- Dropzone css -->
        <link href="assets/dropzone/dropzone.css" rel="stylesheet" type="text/css" />

		<!-- DataTables -->
		<link rel="stylesheet" href="assets/magnific-popup/magnific-popup.css" />
		<link rel="stylesheet" href="assets/jquery-datatables-editable/datatables.css" />
		
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 tooltipss and media queries -->
        <!--[if lt IE 9]>
          <script src="js/html5shiv.js"></script>
          <script src="js/respond.min.js"></script>
        <![endif]-->

	<style>
	.contract_link:hover {
    	text-decoration: underline;
	}
	</style>
    </head>


    <body>

        <!-- Aside Start-->
 	<aside class="left-panel">

	    <!-- brand -->
	    <div class="logo">
	        <a href="index.html" class="logo-expanded">
<!-- 	            <img src="img/logo.png" alt="logo"> -->
				<i class="ion-social-buffer"></i>
				<span class="nav-label">AFW_SYSTEM</span>
	        </a>
	    </div>
	    <!-- / brand -->
	
	    <!-- Navbar Start -->
	    <nav class="navigation">
	        <ul class="list-unstyled">
<!-- 	            <li><a href="index.html"><i class="ion-home"></i> <span class="nav-label">Dashboard</span></a></li> -->
<!-- 	            <li class="has-submenu"><a href="#"><i class="ion-flask"></i> <span class="nav-label">UI Elements</span></a> -->
<!-- 	                <ul class="list-unstyled"> -->
<!-- 	                    <li><a href="typography.html">Typography</a></li> -->
<!-- 	                    <li><a href="buttons.html">Buttons</a></li> -->
<!-- 	                    <li><a href="icons.html">Icons</a></li> -->
<!-- 	                    <li><a href="panels.html">Panels</a></li> -->
<!-- 	                    <li><a href="tabs-accordions.html">Tabs &amp; Accordions</a></li> -->
<!-- 	                    <li><a href="modals.html">Modals</a></li> -->
<!-- 	                    <li><a href="bootstrap-ui.html">BS Elements</a></li> -->
<!-- 	                    <li><a href="progressbars.html">Progress Bars</a></li> -->
<!-- 	                    <li><a href="notification.html">Notification</a></li> -->
<!-- 	                    <li><a href="sweet-alert.html">Sweet-Alert</a></li> -->
<!-- 	                </ul> -->
<!-- 	            </li> -->
<!-- 	            <li class="has-submenu"><a href="#"><i class="ion-settings"></i> <span class="nav-label">Components</span><span class="badge bg-success">New</span></a> -->
<!-- 	                <ul class="list-unstyled"> -->
<!-- 	                    <li><a href="grid.html">Grid</a></li> -->
<!-- 	                    <li><a href="portlets.html">Portlets</a></li> -->
<!-- 	                    <li><a href="widgets.html">Widgets</a></li> -->
<!-- 	                    <li><a href="nestable-list.html">Nesteble</a></li> -->
<!-- 	                    <li><a href="calendar.html">Calendar</a></li> -->
<!-- 	                    <li><a href="ui-sliders.html">Range Slider</a></li> -->
<!-- 	                </ul> -->
<!-- 	            </li> -->
	            <li class="has-submenu active"><a href="#"><i class="ion-compose"></i> <span class="nav-label">客戶資料</span></a>
	                <ul class="list-unstyled">
	                    <li><a href="addCompany.html">新增客戶合約</a></li>
	                    <li><a href="company.html">全部客戶</a></li>
	                    <li><a href="companyOffice.html">辦公室</a></li>
	                    <li><a href="companyPersonal.html">個人座位</a></li>
	                    <li><a href="companyRegister.html">登記</a></li>
	                    <li><a href="companyCC.html">聯絡處 & 停業</a></li>
	                    <li><a href="companyClose.html">退租</a></li>
	                </ul>
	            </li>
				<li class="has-submenu"><a href="#"><i class="ion-grid"></i> <span class="nav-label">收租</span></a>
	                <ul class="list-unstyled">
	                    <li><a href="rentTable.html">收租表</a></li>
	                </ul>
	            </li>
<!-- 	            <li class="has-submenu"><a href="#"><i class="ion-stats-bars"></i> <span class="nav-label">Charts</span><span class="badge bg-purple">1</span></a> -->
<!-- 	                <ul class="list-unstyled"> -->
<!-- 	                    <li><a href="morris-chart.html">Morris Chart</a></li> -->
<!-- 	                    <li><a href="chartjs.html">Chartjs</a></li> -->
<!-- 	                    <li><a href="flot-chart.html">Flot Chart</a></li> -->
<!-- 	                    <li><a href="rickshaw-chart.html">Rickshaw Chart</a></li> -->
<!-- 	                    <li><a href="peity-chart.html">Peity Chart</a></li> -->
<!-- 	                    <li><a href="c3-chart.html">C3 Chart</a></li> -->
<!-- 	                    <li><a href="other-chart.html">Other Chart</a></li> -->
<!-- 	                </ul> -->
<!-- 	            </li> -->
	
<!-- 	            <li class="has-submenu"><a href="#"><i class="ion-email"></i> <span class="nav-label">Mail</span></a> -->
<!-- 	                <ul class="list-unstyled"> -->
<!-- 	                    <li><a href="inbox.html">Inbox</a></li> -->
<!-- 	                    <li><a href="email-compose.html">Compose Mail</a></li> -->
<!-- 	                    <li><a href="email-read.html">View Mail</a></li> -->
<!-- 	                    <li><a href="email-templates.html">Email Templates</a></li> -->
<!-- 	                </ul> -->
<!-- 	            </li> -->
	
<!-- 	            <li class="has-submenu"><a href="#"><i class="ion-location"></i> <span class="nav-label">Maps</span></a> -->
<!-- 	                <ul class="list-unstyled"> -->
<!-- 	                    <li><a href="gmap.html"> Google Map</a></li> -->
<!-- 	                    <li><a href="vector-map.html"> Vector Map</a></li> -->
<!-- 	                </ul> -->
<!-- 	            </li> -->
<!-- 	            <li class="has-submenu"><a href="#"><i class="ion-document"></i> <span class="nav-label">Pages</span><span class="badge bg-pink">5</span></a> -->
<!-- 	                <ul class="list-unstyled"> -->
<!-- 	                    <li class=""><a href="profile.html">Profile</a></li> -->
<!-- 	                    <li><a href="timeline.html">Timeline</a></li> -->
<!-- 	                    <li><a href="invoice.html">Invoice</a></li> -->
<!-- 	                    <li><a href="contact.html">Contact-list</a></li> -->
<!-- 	                    <li><a href="login.html">Login</a></li> -->
<!-- 	                    <li><a href="register.html">Register</a></li> -->
<!-- 	                    <li><a href="recoverpw.html">Recover Password</a></li> -->
<!-- 	                    <li><a href="lock-screen.html">Lock Screen</a></li> -->
<!-- 	                    <li><a href="blank.html">Blank Page</a></li> -->
<!-- 	                    <li><a href="404.html">404 Error</a></li> -->
<!-- 	                    <li><a href="404_alt.html">404 alt</a></li> -->
<!-- 	                    <li><a href="500.html">500 Error</a></li> -->
<!-- 	                </ul> -->
<!-- 	            </li> -->
	        </ul>
	    </nav> 
	</aside>
	<!-- Aside Ends-->


        <!--Main Content Start -->
        <section class="content">
            
            <!-- Header -->
            <header class="top-head container-fluid">
                <button type="button" class="navbar-toggle pull-left">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                
<!--                 Search -->
<!--                 <form role="search" class="navbar-left app-search pull-left hidden-xs"> -->
<!--                   <input type="text" placeholder="Search..." class="form-control"> -->
<!--                   <a href=""><i class="fa fa-search"></i></a> -->
<!--                 </form> -->
                
<!--                 Left navbar -->
<!--                 <nav class=" navbar-default" role="navigation"> -->
<!--                     <ul class="nav navbar-nav hidden-xs"> -->
<!--                         <li class="dropdown"> -->
<!--                           <a data-toggle="dropdown" class="dropdown-toggle" href="#">English <span class="caret"></span></a> -->
<!--                             <ul role="menu" class="dropdown-menu"> -->
<!--                                 <li><a href="#">German</a></li> -->
<!--                                 <li><a href="#">French</a></li> -->
<!--                                 <li><a href="#">Italian</a></li> -->
<!--                                 <li><a href="#">Spanish</a></li> -->
<!--                             </ul> -->
<!--                         </li> -->
<!--                         <li><a href="#">Files</a></li> -->
<!--                     </ul> -->

<!--                     Right navbar -->
<!--                     <ul class="nav navbar-nav navbar-right top-menu top-right-menu">   -->
<!--                         mesages   -->
<!--                         <li class="dropdown"> -->
<!--                             <a data-toggle="dropdown" class="dropdown-toggle" href="#"> -->
<!--                                 <i class="fa fa-envelope-o "></i> -->
<!--                                 <span class="badge badge-sm up bg-purple count">4</span> -->
<!--                             </a> -->
<!--                             <ul class="dropdown-menu extended fadeInUp animated nicescroll" tabindex="5001"> -->
<!--                                 <li> -->
<!--                                     <p>Messages</p> -->
<!--                                 </li> -->
<!--                                 <li> -->
<!--                                     <a href="#"> -->
<!--                                         <span class="pull-left"><img src="img/avatar-2.jpg" class="img-circle thumb-sm m-r-15" alt="img"></span> -->
<!--                                         <span class="block"><strong>John smith</strong></span> -->
<!--                                         <span class="media-body block">New tasks needs to be done<br><small class="text-muted">10 seconds ago</small></span> -->
<!--                                     </a> -->
<!--                                 </li> -->
<!--                                 <li> -->
<!--                                     <a href="#"> -->
<!--                                         <span class="pull-left"><img src="img/avatar-3.jpg" class="img-circle thumb-sm m-r-15" alt="img"></span> -->
<!--                                         <span class="block"><strong>John smith</strong></span> -->
<!--                                         <span class="media-body block">New tasks needs to be done<br><small class="text-muted">3 minutes ago</small></span> -->
<!--                                     </a> -->
<!--                                 </li> -->
<!--                                 <li> -->
<!--                                     <a href="#"> -->
<!--                                         <span class="pull-left"><img src="img/avatar-4.jpg" class="img-circle thumb-sm m-r-15" alt="img"></span> -->
<!--                                         <span class="block"><strong>John smith</strong></span> -->
<!--                                         <span class="media-body block">New tasks needs to be done<br><small class="text-muted">10 minutes ago</small></span> -->
<!--                                     </a> -->
<!--                                 </li> -->
<!--                                 <li> -->
<!--                                     <p><a href="inbox.html" class="text-right">See all Messages</a></p> -->
<!--                                 </li> -->
<!--                             </ul> -->
<!--                         </li> -->
<!--                         /messages -->
<!--                         Notification -->
<!--                         <li class="dropdown"> -->
<!--                             <a data-toggle="dropdown" class="dropdown-toggle" href="#"> -->
<!--                                 <i class="fa fa-bell-o"></i> -->
<!--                                 <span class="badge badge-sm up bg-pink count">3</span> -->
<!--                             </a> -->
<!--                             <ul class="dropdown-menu extended fadeInUp animated nicescroll" tabindex="5002"> -->
<!--                                 <li class="noti-header"> -->
<!--                                     <p>Notifications</p> -->
<!--                                 </li> -->
<!--                                 <li> -->
<!--                                     <a href="#"> -->
<!--                                         <span class="pull-left"><i class="fa fa-user-plus fa-2x text-info"></i></span> -->
<!--                                         <span>New user registered<br><small class="text-muted">5 minutes ago</small></span> -->
<!--                                     </a> -->
<!--                                 </li> -->
<!--                                 <li> -->
<!--                                     <a href="#"> -->
<!--                                         <span class="pull-left"><i class="fa fa-diamond fa-2x text-primary"></i></span> -->
<!--                                         <span>Use animate.css<br><small class="text-muted">5 minutes ago</small></span> -->
<!--                                     </a> -->
<!--                                 </li> -->
<!--                                 <li> -->
<!--                                     <a href="#"> -->
<!--                                         <span class="pull-left"><i class="fa fa-bell-o fa-2x text-danger"></i></span> -->
<!--                                         <span>Send project demo files to client<br><small class="text-muted">1 hour ago</small></span> -->
<!--                                     </a> -->
<!--                                 </li> -->
                                
<!--                                 <li> -->
<!--                                     <p><a href="#" class="text-right">See all notifications</a></p> -->
<!--                                 </li> -->
<!--                             </ul> -->
<!--                         </li> -->
<!--                         /Notification -->

<!--                         user login dropdown start -->
<!--                         <li class="dropdown text-center"> -->
<!--                             <a data-toggle="dropdown" class="dropdown-toggle" href="#"> -->
<!--                                 <img alt="" src="img/avatar-2.jpg" class="img-circle profile-img thumb-sm"> -->
<!--                                 <span class="username">John Deo </span> <span class="caret"></span> -->
<!--                             </a> -->
<!--                             <ul class="dropdown-menu pro-menu fadeInUp animated" tabindex="5003" style="overflow: hidden; outline: none;"> -->
<!--                                 <li><a href="profile.html"><i class="fa fa-briefcase"></i>Profile</a></li> -->
<!--                                 <li><a href="#"><i class="fa fa-cog"></i> Settings</a></li> -->
<!--                                 <li><a href="#"><i class="fa fa-bell"></i> Friends <span class="label label-info pull-right mail-info">5</span></a></li> -->
<!--                                 <li><a href="#"><i class="fa fa-sign-out"></i> Log Out</a></li> -->
<!--                             </ul> -->
<!--                         </li> -->
<!--                         user login dropdown end        -->
<!--                     </ul> -->
<!--                     End right navbar -->
<!--                 </nav> -->
                
            </header>
            <!-- Header Ends -->


            <!-- Page Content Start -->
            <!-- ================== -->

            <div class="wraper container-fluid">
<!--                 <div class="row"> -->
<!--                     <div class="col-sm-12"> -->
<!--                         <div class="bg-picture" style="background-image:url('img/bg_6.jpg')"> -->
<!--                           <span class="bg-picture-overlay"></span>overlay -->
<!--                           meta -->
<!--                           <div class="box-layout meta bottom"> -->
<!--                             <div class="col-sm-6 clearfix"> -->
<!--                               <span class="img-wrapper pull-left m-r-15"><img src="img/avatar-2.jpg" alt="" style="width:64px" class="br-radius"></span> -->
<!--                               <div class="media-body"> -->
<!--                                 <h3 class="text-white mb-2 m-t-10 ellipsis">Jonathan Deo</h3> -->
<!--                                 <h5 class="text-white"> Mycityname</h5> -->
<!--                               </div> -->
<!--                             </div> -->
<!--                             <div class="col-sm-6"> -->

<!--                               <div class="pull-right"> -->
<!--                                 <div class="dropdown"> -->
<!--                                     <a data-toggle="dropdown" class="dropdown-toggle btn btn-primary" href="#"> Following <span class="caret"></span></a> -->
<!--                                     <ul class="dropdown-menu dropdown-menu-right" role="menu"> -->
<!--                                         <li><a href="#">Poke</a></li> -->
<!--                                         <li><a href="#">Private message</a></li> -->
<!--                                         <li class="divider"></li> -->
<!--                                         <li><a href="#">Unfollow</a></li> -->
<!--                                     </ul> -->
<!--                                 </div> -->
<!--                               </div> -->
<!--                             </div> -->
<!--                           </div> -->
<!--                           / meta -->
<!--                         </div> -->
<!--                     </div> -->
<!--                 </div> -->

                <div class="row m-t-30">
                    <div class="col-sm-12">
                        <div class="panel panel-default p-0">
                            <div class="panel-body p-0"> 
                                <ul class="nav nav-tabs profile-tabs">
                                    <li class="active"><a data-toggle="tab" href="#aboutme">關於客戶</a></li>
                                    <li class=""><a data-toggle="tab" href="#edit-companyProfile">基本資料</a></li>
                                    <li class=""><a data-toggle="tab" href="#edit-remit">匯款資料</a></li>
                                    <li class=""><a data-toggle="tab" href="#edit-accountancy">會計師資料</a></li>
                                    <li class=""><a data-toggle="tab" href="#edit-contract">合約資料</a></li>
                                    <li class=""><a data-toggle="tab" href="#projects">紙本檔案</a></li>
                                </ul>

                                <div class="tab-content m-0">
                                    <div id="aboutme" class="tab-pane active">
                                    <div class="profile-desk">
                                        <h1 id="aboutCeo"></h1>
                                        <span class="designation" id="aboutCompanyName"></span>
										<div>
											<button class="btn pull-left updateStatus" data-toggle="modal" data-target="#status-update-modal" ></button>
										</div>
                                        <table class="table table-condensed">
                                            <thead>
                                                <tr>
                                                    <th colspan="3"><h3>Contact Information</h3></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><b>公司地址</b></td>
                                                    <td>
                                                    	<span id="aboutAddress"></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><b>統一編號</b></td>
                                                    <td>
                                                    	<span id="aboutEin"></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><b>公司電話</b></td>
                                                    <td class="ng-binding">
                                                    	<span id="aboutPhoneNumber"></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><b>登記地</b></td>
                                                    <td>
                                                    	<span id="aboutBranch"></span>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div> <!-- end profile-desk -->
                                </div> <!-- about-me -->
								
								<div id="status-update-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
	                                    <div class="modal-dialog"> 
	                                        <div class="modal-content"> 
	                                            <div class="modal-header"> 
	                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button> 
	                                                <h4 class="modal-title">Update Status</h4> 
	                                            </div> 
	                                            <div class="modal-body"> 
													<div class="row">
	                                                    <div class="col-md-6"> 
	                                                        <div class="form-group"> 
	                                                       		<label for="companyStatus" class="control-label">狀態</label>
			                                    				<select class="form-control" id="companyStatus" name="companyStatus">
							                                		<option value="-1">請選擇</option>
							                                		<option value="on">營業</option>
							                                		<option value="off">停業</option>
							                                		<option value="discard">註銷</option>
							                                		<option value="change">遷移</option>
							                                		<option value="nopay">不繳費</option>
							                                		<option value="remove">解散</option>
			                                					</select>
	                                                        </div> 
	                                                    </div>
	                                                    <div class="col-md-6"> 
	                                                        <div class="form-group"> 
	                                                           	<label for="statusChangeDate" class="control-label">更改日期</label>
			                                    				<input class=" form-control" id="statusChangeDate" name="statusChangeDate" type="date" value=""> 
	                                                        </div> 
	                                                    </div>
	                                                </div>
	                                            </div> 
	                                            <div class="modal-footer"> 
	                                                <button type="button" class="btn btn-info" id="companyStatusSave">Save</button>
	                                                <button type="button" class="btn btn-white" data-dismiss="modal" id="companyStatusClose">Close</button>
	                                            </div> 
	                                        </div> 
	                                    </div>
								</div><!-- /.modal -->
	                                
                                <!-- company -->
                                <div id="edit-companyProfile" class="tab-pane">
                                    <div class="user-profile-content">
                                        <form role="form" id="companyProfileForm">
                                        	<h3>公司資料</h3>
	                                        <div class="form-group">
			                                    <label for="pname" class=" col-lg-2">公司名稱 *</label>
												<input class=" form-control" id="pname" name="pname" type="text" value="">
			                                </div>
			                                <div class="form-group">
			                                    <label for="ptype" class=" col-lg-2">行業別</label>
												<input class=" form-control" id="ptype" name="ptype" type="text">
			                                </div>
			                                <div class="form-group">
			                                    <label for="pAddress" class=" col-lg-2">公司地址 *</label>
			                                    <input class="form-control " id="pAddress" name="pAddress" value="">
			                                </div>
			                                <div class="form-group">
			                                    <label for="pemail" class=" col-lg-2">E-Mail</label>
			                                    <input class="form-control " id="pemail" type="email" name="pemail" value="">
			                                </div>
			                                <div class="form-group">
			                                	<label for="pbranch" class=" col-lg-2">登記地 *</label>
			                                	<select class="form-control" id="pbranch" name="pbranch">
			                                		<option value="-1">請選擇</option>
					                          		<option value="221">微風店</option>
					                          		<option value="169">敦化店</option>
					                          		<option value="222">大安店</option>
					                          		<option value="295">忠孝店</option>
					                          		<option value="201">復興店</option>
					                          		<option value="189">南京店</option>
			                                	</select>
			                                </div>
			                                <div class="form-group">
			                                	<label for="pein" class="col-lg-2">統編 *</label>
			                                    <input class="form-control " id="pein" name="pein" type="text" value="">
			                                </div>
			                                <div class="form-group">
			                                    <label for="pceo" class="col-lg-2">負責人 *</label>
			                                    <input class="form-control" id="pceo" name="pceo" type="text" value="">
			                                </div>
			                                <div class="form-group">
			                                    <label for="pbirthday" class="col-lg-2">負責人生日</label>
			                                    <input class="form-control" id="pbirthday" name="pbirthday" type="text" placeholder="yyyy-mm-dd">
			                                </div>
			                                <div class="form-group">
			                                    <label for="pphoneNumber" class="col-lg-2">電話 *</label>
			                                    <input class="form-control" id="pphoneNumber" name="pphoneNumber" type="text" value="">
			                                </div>
			                                <div class="form-group">
			                                    <label for="pfaxNumber" class="col-lg-2">傳真</label>
			                                    <input class="form-control" id="pfaxNumber" name="pfaxNumber" type="text">
			                                </div>
			                                <div class="form-group">
			                                    <label for="pAddress2" class="col-lg-2">轉寄地址</label>
			                                    <input class="form-control " id="pAddress2" name="pAddress2" type="text">
			                                </div>
			                                <div class="form-group">
			                                    <label for="pLetterStatus" class="col-lg-2">信件處理</label>
			                                    <input class="form-control " id="pLetterStatus" name="pLetterStatus" type="text">
			                                </div>
			                                <div class="form-group">
			                                    <label for="pcomment" class="col-lg-2">附註</label>
			                                    <textarea class="form-control " id="pcomment" name="pcomment"></textarea>
			                                </div>
			                                <button class="btn btn-primary" id="companyUpdate" type="button">Save</button>
                                        </form>
                                    </div>
                                </div>
                                <!-- TODO 末五碼須隨著帳號變動 -->
                                <!-- remit -->
                                <div id="edit-remit" class="tab-pane">
                                    <div class="row m-t-10">
                                		<div class="col-md-12">
											<button class="btn btn-primary pull-right" data-toggle="modal" data-target="#rem-close-modal">新增</button>
										</div>
                                        <div class="col-md-12">
                                            <div class="portlet"><!-- /primary heading -->
                                                <div id="portlet3" class="panel-collapse collapse in">
                                                    <div class="portlet-body">
                                                        <div class="table-responsive">
                                                            <table class="table">
                                                                <thead>
                                                                    <tr>
                                                                        <th>#</th>
                                                                        <th>帳號</th>
                                                                        <th>帳號末五碼</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody id="remitTbody">
                                                                	<tr>
                                                                        <td>#</td>
                                                                        <td>None</td>
                                                                        <td>None</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div> <!-- /Portlet -->
                                        </div>
                                    </div>
                                    
                                    <div class="user-profile-content" id="remitProfile" style="display:none">
                                		<h3>匯款資料</h3>
										<form role="form" id="remitForm">
	                                		<div class="form-group">
			                                    <label for="praccount" class="col-lg-2">帳號</label>
			                                    <input class=" form-control" id="praccount" name="praccount" type="text" value="" >
			                                </div>
		                                	<div class="form-group">
			                                    <label for="prmode" class="col-lg-2">備註</label>
			                                    <input class=" form-control" id="prmode" name="prmode" type="text">
			                                </div>
			                                <button class="btn btn-primary" id="remitUpdate" type="button">Save</button>
		                        		</form>
		                        	</div>
                                    
                                    <div id="rem-close-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
	                                    <div class="modal-dialog"> 
	                                        <div class="modal-content"> 
	                                            <div class="modal-header"> 
	                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button> 
	                                                <h4 class="modal-title">New Remit</h4> 
	                                            </div> 
	                                            <div class="modal-body"> 
													<div class="row">
	                                                    <div class="col-md-6"> 
	                                                        <div class="form-group"> 
	                                                           <label for="prNaccount" class="control-label">帳號</label>
			                                    				<input class=" form-control" id="prNaccount" name="prNaccount" type="text" value=""> 
	                                                        </div> 
	                                                    </div>
	                                                    <div class="col-md-6"> 
	                                                        <div class="form-group"> 
	                                                           <label for="prNmode" class="control-label">備註</label>
			                                    				<input class=" form-control" id="prNmode" name="prNmode" type="text" value=""> 
	                                                        </div> 
	                                                    </div>
	                                                </div>
	                                            </div> 
	                                            <div class="modal-footer"> 
	                                                <button type="button" class="btn btn-info" id="remitSave">Save</button>
	                                                <button type="button" class="btn btn-white" data-dismiss="modal" id="remitClose">Close</button>
	                                            </div> 
	                                        </div> 
	                                    </div>
	                                </div><!-- /.modal -->
                              	</div>
                              	
                              	<!-- accountancy -->
                                <div id="edit-accountancy" class="tab-pane">
                                    <div class="user-profile-content">
                                    	<form id="accountancyForm">
                                    		<h3>會計師事務所</h3>
			                                <div class="form-group ">
			                                    <label for="paName" class="control-label col-lg-2">事務所名稱</label>
			                                    <input class=" form-control" id="paName" name="paName" type="text">
		                                	</div>
		                                	<div class="form-group ">
			                                    <label for="paContact" class="control-label col-lg-2">聯絡人</label>
			                                    <input class=" form-control" id="paContact" name="paContact" type="text">
		                                	</div>
		                                	<div class="form-group ">
			                                    <label for="paPhoneNumber" class="control-label col-lg-2">電話</label>
			                                    <input class=" form-control" id="paPhoneNumber" name="paPhoneNumber" type="text">
		                                	</div>
		                                	<div class="form-group ">
			                                    <label for="paAddress" class="control-label col-lg-2">地址</label>
			                                    <input class=" form-control" id="paAddress" name="paAddress" type="text">
		                                	</div>
                                            <button class="btn btn-primary" id="accountancyUpdate" type="button">Save</button>
                                    	</form>
                                    </div>
                              	</div>
                                
                                <!-- contract -->
                                <div id="edit-contract" class="tab-pane">
                                	<div class="row m-t-10">
                                		<div class="col-md-12">
											<button class="btn btn-primary pull-right" data-toggle="modal" data-target="#con-close-modal" id="createContract">新增合約</button>
										</div>
                                        <div class="col-md-12">
                                            <div class="portlet"><!-- /primary heading -->
                                                <div id="portlet2" class="panel-collapse collapse in">
                                                    <div class="portlet-body">
                                                        <div class="table-responsive">
                                                            <table class="table">
                                                                <thead>
                                                                    <tr>
                                                                        <th>#</th>
                                                                        <th>起始日期</th>
                                                                        <th>到期日期</th>
                                                                        <th>合約狀態</th>
                                                                        <th>簽約人</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody id="contractTbody">
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div> <!-- /Portlet -->
                                        </div>
                                    </div>
                                    
                                	<div class="user-profile-content" id="contractProfile" style="display:none">
                                		<h3>合約資料</h3>
										<form role="form" id="contractForm">
	                                		<div class="form-group">
			                                    <label for="pcuser" class="col-lg-2">簽約人</label>
			                                    <input class=" form-control" id="pcuser" name="pcuser" type="text" value="" disabled>
			                                </div>
			                                <div class="form-group">
			                                    <label for="pcuserc" class="col-lg-2">介紹人</label>
			                                    <input class=" form-control" id="pcuserc" name="pcuserc" type="text" disabled>
			                                </div>
			                                <div class="form-group">
			                                	<label for="pctype" class="col-lg-2">類型 *</label>
			                                	<select class="form-control" id="pctype" name="pctype" disabled>
			                                		<option value="-1">請選擇</option>
			                                		<option value="o">租辦公室</option>
			                                		<option value="p">個人座位</option>
			                                		<option value="r">登記</option>
			                                		<option value="c">聯絡處</option>
			                                		<option value="s">停業</option>
			                                		<option value="other">其他</option>
			                                	</select>
		                                	</div>
		                                	<div class="form-group">
			                                    <label for="pcofficeNumc" class="col-lg-2">辦公室號碼</label>
			                                    <input class=" form-control" id="pcofficeNumc" name="pcofficeNumc" type="text">
			                                </div>
			                                <div class="form-group">
			                                    <label for="pcdatesign" class="col-lg-2">簽約日期</label>
			                                    <input class="form-control" id="pcdatesign" name="pcdatesign" type="text" placeholder="yyyy-mm-dd">
			                                </div>
	                                        <div class="form-group">
	                                            <label class="col-lg-2" for="pcdates">合約日期(起) *</label>
	                                            <input type="text" id="pcdates" name="pcdates" class="form-control" placeholder="yyyy-mm-dd">
<!--                                           		<div class="col-lg-12"> -->
<!--                                            			<div class="input-group"> -->
<!--                                            				<input type="text" id="pcdates" name="pcdates" class="form-control col-lg-2" placeholder='yyyy-mm-dd'> -->
<!-- 														<span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span> -->
<!-- 													</div> -->
<!-- 												</div> -->
	                                        </div>
	                                        <div class="form-group">
	                                            <label class="col-lg-2" for="pcdatee">合約日期(終) *</label>
	                                            <input type="text" id="pcdatee" name="pcdatee" class="form-control" placeholder="yyyy-mm-dd">
<!--                                             	<div class="col-lg-12"> -->
<!--                                            			<div class="input-group"> -->
<!-- 	                                            		<input type="text" id="pcdatee" name="pcdatee" class="form-control" placeholder='yyyy-mm-dd'> -->
<!-- 														<span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span> -->
<!-- 													</div> -->
<!--                                             	</div> -->
	                                        </div>
	                                        <div class="form-group">
			                                	<label for="prent" class="col-lg-2">租金 *</label>
			                                    <input class="form-control" id="prent" name="prent" type="text" value="">
			                                </div>
			                                <div class="form-group">
			                                	<label for="pdeposit" class="col-lg-2">押金 *</label>
			                                    <input class="form-control " id="pdeposit" name="pdeposit" type="text" value="">
			                                </div>
			                                <div class="form-group">
			                                	<label for="prented" class="col-lg-2">已收租金</label>
			                                    <input class="form-control " id="prented" name="prented" type="text">
			                                </div>
			                                <div class="form-group">
			                                	<label for="pdeposited" class="col-lg-2">已收押金</label>
			                                    <input class="form-control " id="pdeposited" name="pdeposited" type="text">
			                                </div>
			                                <div class="form-group">
			                                    <label for="pcommentc" class="col-lg-2">附註</label>
			                                    <textarea class="form-control " id="pcommentc" name="pcommentc"></textarea>
			                                </div>
			                                <button class="btn btn-primary" id="contractUpdate" type="button">Save</button>
		                        		</form>
		                        	</div>
		                        	<div id="con-close-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
	                                    <div class="modal-dialog"> 
	                                        <div class="modal-content"> 
	                                            <div class="modal-header"> 
	                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button> 
	                                                <h4 class="modal-title">New Contract</h4> 
	                                            </div> 
	                                            <div class="modal-body"> 
	                                                <div class="row">
	                                                    <div class="col-md-6"> 
	                                                        <div class="form-group"> 
	                                                        	<label for="pcNUser" class="control-label">簽約人*</label>
			                                    				<select class="form-control" id="pcNUser" name="pcNUser">
	                                                            	<option value="-1">請選擇</option>
	                                                            </select>
	                                                        </div> 
	                                                    </div> 
	                                                    <div class="col-md-6"> 
	                                                        <div class="form-group">
	                                                            <label for="pcNUserc" class="control-label">介紹人</label>
	                                                            <select class="form-control" id="pcNUserc" name="pcNUserc">
	                                                            	<option value="-1">請選擇</option>
	                                                            </select>
	                                                        </div> 
	                                                    </div>
	                                                </div> 
	                                                <div class="row"> 
	                                                    <div class="col-md-6"> 
	                                                        <div class="form-group">
	                                                            <label for="pcNType" class="control-label">類型 *</label>
							                                	<select class="form-control" id="pcNType" name="pcNType">
							                                		<option value="-1">請選擇</option>
			                                						<option value="o">租辦公室</option>
			                                						<option value="p">個人座位</option>
			                                						<option value="r">登記</option>
			                                						<option value="c">聯絡處</option>
			                                						<option value="s">停業</option>
			                                						<option value="other">其他</option>
							                                	</select> 
	                                                        </div> 
	                                                    </div>
	                                                    <div class="col-md-6">
			                                    			<label for="pcNdatesign" class="control-label">簽約日期</label>
			                                   				<input class="form-control" id="pcNdatesign" name="pcNdatesign" type="text" placeholder="yyyy-mm-dd">
			                                			</div>
	                                                </div>
	                                                <div class="row">
	                                                	<div class="col-md-12"> 
	                                                        <div class="form-group">
	                                                            <label for="pcofficeNum" class="control-label">辦公室號碼</label>
			                                    				<input class=" form-control" id="pcofficeNum" name="pcofficeNum" type="text">
	                                                        </div> 
	                                                    </div>
	                                                </div>
	                                                <div class="row"> 
	                                                    <div class="col-md-6"> 
	                                                        <div class="form-group"> 
	                                                            <label class="control-label" for="pcNDates">合約日期(起) *</label>
	                                                            <input type="text" id="pcNDates" name="pcNDates" class="form-control" placeholder="yyyy-mm-dd">
<!-- 				                                          		<div class="col-lg-12"> -->
<!-- 				                                           			<div class="input-group"> -->
<!-- 				                                           				<input type="text" id="pcNDates" name="pcNDates" class="form-control col-lg-2" placeholder='yyyy-mm-dd' value=""> -->
<!-- 																		<span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span> -->
<!-- 																	</div> -->
<!-- 																</div> -->
	                                                        </div> 
	                                                    </div> 
	                                                    <div class="col-md-6"> 
	                                                        <div class="form-group"> 
	                                                            <label class="control-label" for="pcNDatee">合約日期(終) *</label>
	                                                            <input type="text" id="pcNDatee" name="pcNDatee" class="form-control" placeholder="yyyy-mm-dd">
<!-- 				                                            	<div class="col-lg-12"> -->
<!-- 				                                           			<div class="input-group"> -->
<!-- 					                                            		<input type="text" id="pcNDatee" name="pcNDatee" class="form-control" placeholder='yyyy-mm-dd' value=""> -->
<!-- 																		<span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span> -->
<!-- 																	</div> -->
<!-- 				                                            	</div> -->
	                                                        </div> 
	                                                    </div> 
	                                                    <div class="col-md-6"> 
	                                                        <div class="form-group"> 
	                                                            <label for="pNRent" class="control-label">租金 *</label>
			                                    				<input class="form-control " id="pNRent" name="pNRent" type="text" value="">
	                                                        </div> 
	                                                    </div> 
	                                                    <div class="col-md-6">
	                                                    	<div class="form-group">
							                                	<label for="pNDeposit" class="control-label">押金 *</label>
							                                    <input class="form-control " id="pNDeposit" name="pNDeposit" type="text" value="">
							                                </div>
	                                                    </div>
	                                                    <div class="col-md-6">
	                                                    	<div class="form-group">
							                                	<label for="pNRented" class="control-label">已收租金</label>
							                                    <input class="form-control " id="pNRented" name="pNRented" type="text">
						                                    </div>
	                                                    </div>
		                                                <div class="col-md-6">
		                                                	<div class="form-group">
							                                	<label for="pNDeposited" class="control-label">已收押金</label>
							                                    <input class="form-control " id="pNDeposited" name="pNDeposited" type="text">
						                                    </div>
	                                                    </div>
	                                                </div> 
	                                                <div class="row"> 
	                                                    <div class="col-md-12"> 
	                                                        <div class="form-group no-margin"> 
	                                                            <label for="pNcommentc" class="control-label">附註</label>
			                                    				<textarea class="form-control " id="pNcommentc" name="pNcommentc"></textarea>
	                                                        </div> 
	                                                    </div>
	                                                </div> 
	                                            </div> 
	                                            <div class="modal-footer"> 
	                                                <button type="button" class="btn btn-info" id="contractSave">Save</button>
	                                                <button type="button" class="btn btn-white" data-dismiss="modal" id="contractClose">Close</button>
	                                            </div> 
	                                        </div> 
	                                    </div>
	                                </div><!-- /.modal -->
								</div>
								
								<!-- File upload -->
								<div id="projects" class="tab-pane">
									<div class="row">
					                    <div class="col-md-12 portlets">
					                        <!-- Your awesome content goes here -->
					                        <div class="m-b-30">
					                            <form action="#" class="dropzone" id="dropzone">
					                              <div class="fallback">
					                                <input name="file" type="file" multiple />
					                              </div>
					                            </form>
					                        </div>
					                    </div>
					                </div>
	                           	</div>
	                        </div> 
	                    </div>
	                </div>
	            </div>
	        </div>
		</div>
        <!-- Page Content Ends -->
        <!-- ================== -->

        <!-- Footer Start -->
        <footer class="footer">
            2016 © AFW.
        </footer>
        <!-- Footer Ends -->



    </section>
    <!-- Main Content Ends -->


<!-- js placed at the end of the document so the pages load faster -->
<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/pace.min.js"></script>
<script src="js/modernizr.min.js"></script>
<script src="js/wow.min.js"></script>
<script src="js/jquery.scrollTo.min.js"></script>
<script src="js/jquery.nicescroll.js" type="text/javascript"></script>
<script src="js/jquery.app.js"></script>
<script src="assets/timepicker/bootstrap-datepicker.js"></script>

<!--form validation-->
<script type="text/javascript" src="assets/jquery.validate/jquery.validate.min.js"></script>

<!-- Page Specific JS Libraries -->
<script src="assets/dropzone/dropzone.min.js"></script>

<script src="assets/magnific-popup/magnific-popup.js"></script>
<script src="assets/jquery-datatables-editable/jquery.dataTables.js"></script> 
<script src="assets/datatables/dataTables.bootstrap.js"></script>
<script src="assets/jquery-datatables-editable/datatables.editable.init.js"></script>

<script src="assets/sweet-alert/sweet-alert.min.js"></script>
<script src="assets/sweet-alert/sweet-alert.init.js"></script>

<script type="text/javascript">
(function($){
	//TODO add contract validate
	var form = $("#companyProfileForm");
	form.validate({
	    errorPlacement: function errorPlacement(error, element) { element.after(error); },
	    rules: {
	    	pname: "required",
            pemail: {
                email: true
            },
            pbranch: "required",
            pAddress: "required",
            pcofficeNumc: {
            	digits: true
            },
            pein: {
            	required: true,
            	digits: true
            },
            pceo: "required",
//             pphoneNumber: {
//             	required: true,
//             	minlength:9,
//             	digits: true
//             },
           	pbirthday: {
            	date: true
            },
			pcuser: "required",
			pcdates: "required",
            pcdatee: {
            	required: true,
            	isAfterStartDate: true
            },
            prent: {
            	required: true,
            	digits: true
            },
            pdeposit: {
            	required: true,
            	digits: true
            },
            prented: {
            	//required: true,
            	digits: true
            },
            pdeposited: {
            	//required: true,
            	digits: true
            },
			paPhoneNumber: {
				minlength: 9,
				digits: true
			},
			pctype: "required"
//            cAddress2 : "required"
        },
        messages: {
        	pname: "請輸入公司名稱",
            pmail: {
            	email: "格式錯誤"
            },
            pbranch: "請選擇簽約分店",
            pAddress: "請輸入地址",
            pcofficeNumc: {
            	digits: "格式錯誤"
            },
            pein: {
            	required: "請輸入統編",
            	digits: "格式錯誤"
            },
            pceo: "請輸入負責人",
            pphoneNumber: {
            	required: "請輸入電話",
            	minlength: "長度錯誤",
            	digits: "格式錯誤"
            },
            pbirthday: {
            	date: "格式錯誤"
            },
            pcuser: "請輸入簽約人",
            pcdates: "請輸入日期",
            pcdatee: {
            	required: "請輸入日期",
            	isAfterStartDate: "不能小於合約起始日期"
            },
            prent: {
            	required: "請輸入租金",
            	digits: "格式錯誤"
            },
            pdeposit: {
            	required: "請輸入押金",
            	digits: "格式錯誤"
            },
            prented: {
            	//required: "請輸入已收租金",
            	digits: "格式錯誤"
            },
            pdeposited: {
            	//required: "請輸入已收押金",
            	digits: "格式錯誤"
            },
            paPhoneNumber: {
            	minlength: "長度錯誤",
            	digits: "格式錯誤"
            },
            pctype: "請選擇簽約類型"
//            cAddress2: "請輸入轉寄地址"
        }
	});
	
	//validate endDate > startDate
	var isAfterStartDate = function(startDateStr, endDateStr) {
	    var sDate = new Date(startDateStr);
	    var eDate = new Date(endDateStr);
	
	    if(sDate > eDate) {
	        return false;
	    }
		return true;
	};
	
	jQuery.validator.addMethod("isAfterStartDate", function(value, element) {
		return isAfterStartDate($('#pcdates').val(), $('#pcdatee').val());
    }, "End date should be after start date");
	//validate endDate > startDate
	
	// Date Picker //
    $('#pcdates').datepicker({
        format: 'yyyy-mm-dd',
        onClose: function() {
            $('#ccdates').valid();
        },
        autoclose: true
    });
	
    $('#pcdatee').datepicker({
        format: 'yyyy-mm-dd',
        autoclose: true
    });
    
    $('#pcNDates').datepicker({
        format: 'yyyy-mm-dd',
        onClose: function() {
            $('#pcNDates').valid();
        },
        autoclose: true
    });
    
    $('#pcNDatee').datepicker({
        format: 'yyyy-mm-dd',
        onClose: function() {
            $('#pcNDatee').valid();
        },
        autoclose: true
    });
    
    $(function() {
		$( "#pbirthday" ).datepicker({
	        format: 'yyyy-mm-dd',
	        autoclose: true
	    });
	});
    
    $(function() {
		$( "#pcNdatesign" ).datepicker({
	        format: 'yyyy-mm-dd',
	        autoclose: true
	    });
	});
    
    $(function() {
		$( "#pcdatesign" ).datepicker({
	        format: 'yyyy-mm-dd',
	        autoclose: true
	    });
	});
    
 	// Date Picker //
	
	$('#companyUpdate').on('click', function() {
	    var status = $("#companyProfileForm").valid();
	    if(status == true) {
		    updateCompany();
	    }
	});
 	
	$('#accountancyUpdate').on('click', function() {
	    var status = $("#accountancyForm").valid();
	    if(status == true) {
	    	updateAccountancy();
	    }
	    
	});
 	
	$('#contractUpdate').on('click', function() {
	    var status = $("#contractForm").valid();
	    if(status == true) {
	    	updateContract();
	    }
	});
	
	$('#remitUpdate').on('click', function() {
	    if($('#praccount').val() != '') {
	    	updateRemit();
	    } else {
	    	alert('Text Can Not Empty');
	    }
	});
	
	$('#remitSave').on('click', function() {
		if($('#prNaccount').val() != '') {
			createRemit();	
		} else {
	    	alert('Text Can Not Empty');
	    }
	});
	
	$('#contractSave').on('click', function() {
		if($('#pcNType').val() != -1) {
			createContract();	
		} else {
	    	alert('Text Can Not Empty');
	    }
	});
	
	$('#createContract').on('click', function() {
		$("#pcNUserc option").remove();
		getAllUserAjax();
	});
	
	$('#companyStatusSave').on('click', function() {
		updateCompanyStatus();
	});
	
	
	
	
	<!-----------------------ajax-------------------------------->
	var contractData = [];
	var remitData = [];
	var root = location.protocol + '//' + location.host;
    var id;
	
    var retriveDataAjax = function() {
    	$.ajax({
			url:root + "/AFW-I-System/retrive/companyProfile/" + id,
			type:'get',
			dataType : 'json',
			contentType: 'application/json',
			success : function(response) {
				//alert("success");
				//console.log("retriveDataAjax:" + response.message);
				if(response.status == 'success') {
					var data = jQuery.parseJSON(response.message);
					console.log(data);
					setCompanyData(data.company);
					setAccountancyData(data.company.accId);
					
					//TODO
					if(data.remit != null) {
						setRemitData(data.remit);
						remitData = data.remit;
					}
					setContractData(data.combine);
					contractData = data.combine;
				} else {
					alert(data.message);
				}
			},
			error : function(e) {
				alert("error");
				console.log("ERROR: ", e);
			},
			done : function(e) {
				console.log("DONE");
			}
		});
    }
    var companyId = 0;
    var setCompanyData = function(data) {
    	console.log(data);
    	companyId = data.companyId;
    	$('#pname').val(data.companyName);
    	//about page
    	$('#aboutCompanyName').html(data.companyName);
    	//
    	$('#ptype').val(data.companyType);
    	$('#pAddress').val(data.companyAddress);
    	//about page
    	$('#aboutAddress').html(data.companyAddress);
    	//
    	$('#pemail').val(data.companyMail);
    	$('#pbranch').val(data.companyCode);
    	//about page
    	$('#aboutBranch').html(data.companyCode);
    	//
    	$('#pein').val(data.companyEin);
    	//about page
    	$('#aboutEin').html(data.companyEin);
    	//
    	$('#pceo').val(data.companyExecutive);
    	//about page
    	$('#aboutCeo').html(data.companyExecutive);
    	
    	if(data.companyBitrhday != null) {
        	var date = new Date(data.companyBitrhday);
        	var day = ("0" + date.getDate()).slice(-2);
        	var month = ("0" + (date.getMonth() + 1)).slice(-2);
        	var dateFormat = date.getFullYear()+"-"+month+"-"+day;
        	$('#pbirthday').attr('value', dateFormat);
    	}
    	
    	$('#pphoneNumber').val(data.companyNumber);
    	//about page
    	$('#aboutPhoneNumber').html(data.companyNumber);
    	//
    	$('#pfaxNumber').val(data.companyFax);
    	$('#pAddress2').val(data.companyAddress2);
    	$('#pLetterStatus').val(data.companyLetterStatus);
    	$('#pcomment').val(data.companyRemark);
    	
    	//set status
    	switch(data.companyStatus) {
		    case 'on': $('.updateStatus').html('營業'); $('.updateStatus').attr('id','on'); $('.updateStatus').addClass('btn-primary'); break;
		    case 'off': $('.updateStatus').html('停業'); $('.updateStatus').attr('id','off'); $('.updateStatus').addClass('btn-danger'); break;
		    case 'discard': $('.updateStatus').html('註銷'); $('.updateStatus').attr('id','discard'); $('.updateStatus').addClass('btn-danger'); break;
		    case 'change': $('.updateStatus').html('遷移'); $('.updateStatus').attr('id','change'); $('.updateStatus').addClass('btn-danger'); break;
		    case 'nopay': $('.updateStatus').html('不繳費'); $('.updateStatus').attr('id','nopay'); $('.updateStatus').addClass('btn-danger'); break;
		    case 'remove': $('.updateStatus').html('解散'); $('.updateStatus').attr('id','remove'); $('.updateStatus').addClass('btn-danger'); break;
		}
    }
    
	var setContractData = function(data) {
    	//console.log(data);
    	var str = "";
    	for(var i=0; i<data.length; i++) {
    		//console.log(data[i].contract);
    		
    		var dateS = new Date(data[i].contract.contractStart);
        	var day = ("0" + dateS.getDate()).slice(-2);
        	var month = ("0" + (dateS.getMonth() + 1)).slice(-2);
        	var dateFormatS = dateS.getFullYear()+"-"+month+"-"+day;
        	
        	var dateE = new Date(data[i].contract.contractEnd);
        	var day = ("0" + dateE.getDate()).slice(-2);
        	var month = ("0" + (dateE.getMonth() + 1)).slice(-2);
        	var dateFormatE = dateE.getFullYear()+"-"+month+"-"+day;
    		var endDate = new Date(dateFormatE);
        	
        	var q = new Date();
        	var m = q.getMonth()+1;
        	var d = q.getDay();
        	var y = q.getYear();
        	var today = new Date(y,m,d);
        	
        	var contractStatus;
        	if(endDate > today) {
        		contractStatus = '合約中';
        	} else {
        		contractStatus = '到期';
        	}
        	
        	var order = i+1;
    		str = str + '<tr>' +
            '<td><button class="contract_link btn btn-success btn-sm m-b-5" onclick="setEachContractData(event);" id='+ data[i].contract.contractId + '>' + order +'</button></td>' +
            '<td>' + dateFormatS + '</td>' +
            '<td>' + dateFormatE + '</td>' +
            '<td><span class="label label-info">' + contractStatus + '</span></td>' +
            //'<td>' + '謝欣育' + '</td></tr>';
            '<td>' + data[i].user.userName + '</td></tr>';
            
            
            
    		if(data[i].office != null) {
    			//console.log(data[i].office);
    		}
    		
			if(data[i].user != null) {
				console.log(data[i].user);
    		}
			
			if(data[i].user2 != null) {
				console.log(data[i].user2);
    		}
    	}
    	$("#contractTbody").html(str);
    }
	var contractId = 0;
	window.setEachContractData = function(e) {
		$('#contractProfile').css('display', 'block');
		console.log($(this));
		$(this).parents('tr').eq(0).addClass('active');
		contractId = e.target.id;
		for(var i=0; i<contractData.length; i++) {
			if(contractData[i].contract.contractId == contractId) {
				console.log(contractData[i]);
				
				$('#pcuser').val(contractData[i].user.userName);
				if(contractData[i].user2 != null) {
					$('#pcuserc').val(contractData[i].user2.userName);
	    		} else {
	    			$('#pcuserc').val("");
	    		}
				
				$('#pctype').val(contractData[i].contract.contractType);
				if(contractData[i].office != null) {
					$('#pcofficeNumc').val(contractData[i].office.officeNumber);
				} else {
					$('#pcofficeNumc').val('');
				}
				
				if(contractData[i].contract.contractDate != null) {
					var date = new Date(contractData[i].contract.contractDate);
	    			var day = ("0" + date.getDate()).slice(-2);
	    			var month = ("0" + (date.getMonth() + 1)).slice(-2);
	    			var dateFormat = date.getFullYear()+"-"+month+"-"+day;
	    			$('#pcdatesign').attr('value', dateFormat);
				}
				
				var dateS = new Date(contractData[i].contract.contractStart);
	        	var day = ("0" + dateS.getDate()).slice(-2);
	        	var month = ("0" + (dateS.getMonth() + 1)).slice(-2);
	        	var dateFormatS = dateS.getFullYear()+"-"+month+"-"+day;
				$('#pcdates').val(dateFormatS);
				
				var dateE = new Date(contractData[i].contract.contractEnd);
	        	var day = ("0" + dateE.getDate()).slice(-2);
	        	var month = ("0" + (dateE.getMonth() + 1)).slice(-2);
	        	var dateFormatE = dateE.getFullYear()+"-"+month+"-"+day;
	    		$('#pcdatee').val(dateFormatE);
	    		
	    		$('#prent').val(contractData[i].contract.contractRent);
	    		$('#pdeposit').val(contractData[i].contract.contractDeposit);
	    		$('#prented').val(contractData[i].contract.contractRented);
	    		$('#pdeposited').val(contractData[i].contract.contractDeposited);
	    		$('#pcommentc').val(contractData[i].contract.contractRemarks);
			}
		}
	}
	
	var accId = 0;
	var setAccountancyData = function(data) {
    	//console.log(data);
    	accId = data.acccId;
    	$('#paName').val(data.accName);
    	$('#paContact').val(data.accContact);
    	$('#paPhoneNumber').val(data.accPhone);
    	$('#paAddress').val(data.accAddress);
    }
	
	var setRemitData = function(data) {
		//console.log(data);
    	var str = "";
    	for(var i=0; i<data.length; i++) {
    		var length = data[i].remitAccount.length
    		var order = i+1;
    		str = str + '<tr>' +
            '<td><button class="contract_link btn btn-success btn-sm m-b-5" onclick="setEachRemitData(event);" id='+ data[i].remitId + '>' + order +'</button></td>' +
            '<td>' + data[i].remitAccount + '</td>' +
            '<td>' + data[i].remitAccount.substring(length-5, length) + '</td>' ;
    	}
    	
    	$("#remitTbody").html(str);
    }
	
	var remitId = 0;
	window.setEachRemitData = function(e) {
		$('#remitProfile').css('display', 'block');
		remitId = e.target.id;
		for(var i=0; i<remitData.length; i++) {
			if(remitData[i].remitId == remitId) {
				$('#praccount').val(remitData[i].remitAccount);
				$('#prmode').val(remitData[i].remitMode);
			}
		}
	}
	
	var updateCompany = function() {
		var company = {
			companyName : $('#pname').val(),
  	   		companyType : $('#ptype').val(),
  	   		companyAddress : $('#pAddress').val(),
  	   		companyMail : $('#pemail').val(),
  	   		companyCode : $('#pbranch').val(),
  	   		companyEin : $('#pein').val(),
  	   		companyExecutive : $('#pceo').val(),
  	   		companyBitrhday : $('#pbirthday').val(),
  	   		companyNumber : $('#pphoneNumber').val(),
  	   		companyFax : $('#pfaxNumber').val(),
  	   		companyAddress2 : $('#pAddress2').val(),
  	   		companyLetterStatus : $('#pLetterStatus').val(),
  	   		companyRemark : $('#pcomment').val()
		}
		
		console.log(JSON.stringify(company));
		$.ajax({
			url:root + "/AFW-I-System/company/update/"+companyId,
			type:'put',
			data : JSON.stringify(company),
			dataType : 'json',
			contentType: 'application/json; charset=UTF-8',
			success : function(data) {
				//alert("success");
				console.log(data);
				if(data.status == 'success') {
					swal("更新成功!", "", "success");
				} else {
					alert(data.message);
				}
			},
			error : function(e) {
				alert("something error");
				console.log("ERROR: ", e);
			},
			done : function(e) {
				console.log("DONE");
			}
		});
	}
	
	var updateAccountancy = function() {
		var accountancy = {
			accName : $('#paName').val(),
   	   		accContact : $('#paContact').val(),
   	   		accPhone : $('#paPhoneNumber').val(),
   	   		accAddress : $('#paAddress').val()
		}
		
		console.log(JSON.stringify(accountancy));
		$.ajax({
			url:root + "/AFW-I-System/accountancy/update/" + accId,
			type:'put',
			data : JSON.stringify(accountancy),
			dataType : 'json',
			contentType: 'application/json; charset=UTF-8',
			success : function(data) {
				console.log(data);
				if(data.status == 'success') {
					swal("更新成功!", "", "success");
				} else {
					alert(data.message);
				}
			},
			error : function(e) {
				alert("something error");
				console.log("ERROR: ", e);
			},
			done : function(e) {
				console.log("DONE");
			}
		});
	}
	
	var updateContract = function() {
		var contract = {
   	   		contractType : $('#pctype').val(),
   	   		contractDate : $('#pcdatesign').val(),
   	   		contractStart : $('#pcdates').val(),
   	   		contractEnd : $('#pcdatee').val(),
   	   		contractRent : $('#prent').val(),
   	   		contractDeposit : $('#pdeposit').val(),
   	   		contractRented : $('#prented').val(),
   	   		contractDeposited : $('#pdeposited').val(),
   	   		contractRemarks : $('#pcommentc').val(),
   	   		officeNumber : $('#pcofficeNumc').val()
		}
		
		console.log(JSON.stringify(contract));
		$.ajax({
			url:root + "/AFW-I-System/contract/update/" + contractId,
			type:'put',
			data : JSON.stringify(contract),
			dataType : 'json',
			contentType: 'application/json; charset=UTF-8',
			success : function(data) {
				console.log(data);
				if(data.status == 'success') {
					swal("更新成功!", "", "success");
					setTimeout(function() {
						location.reload();
					}, 1000);
				} else {
					alert(data.message);
				}
			},
			error : function(e) {
				alert("something error");
				console.log("ERROR: ", e);
			},
			done : function(e) {
				console.log("DONE");
			}
		});
	}
	
	var updateRemit = function() {
		var remit = {
   	   		remitMode : $('#prmode').val(),
   	   		remitAccount : $('#praccount').val(),
   	   		companyId : companyId
		}
		
		console.log(JSON.stringify(remit));
		$.ajax({
			url:root + "/AFW-I-System/remit/update/" + remitId,
			type:'put',
			data : JSON.stringify(remit),
			dataType : 'json',
			contentType: 'application/json; charset=UTF-8',
			success : function(data) {
				console.log(data);
				if(data.status == 'success') {
					swal("更新成功!", "", "success");
					setTimeout(function() {
						location.reload();
					}, 1000);
				} else {
					alert(data.message);
				}
			},
			error : function(e) {
				alert("something error");
				console.log("ERROR: ", e);
			},
			done : function(e) {
				console.log("DONE");
			}
		});
	}
	
	var updateCompanyStatus = function() {
		var company = {
   	   		companyStatus : $('#companyStatus').val(),
   	   		companyStatusChangeDate : $('#statusChangeDate').val()
		}
		
		console.log(JSON.stringify(company));
		$.ajax({
			url:root + "/AFW-I-System/company/status/update/" + companyId,
			type:'put',
			data : JSON.stringify(company),
			dataType : 'json',
			contentType: 'application/json; charset=UTF-8',
			success : function(data) {
				console.log(data);
				if(data.status == 'success') {
					$('#companyStatusClose').click();
					swal("更新成功!", "", "success");
					setTimeout(function() {
						location.reload();
					}, 1000);
				} else {
					alert(data.message);
				}
			},
			error : function(e) {
				alert("something error");
				console.log("ERROR: ", e);
			},
			done : function(e) {
				console.log("DONE");
			}
		});
	}
	
	var createRemit = function() {
		var remit = {
			remitAccount : $('#prNaccount').val(),
			remitMode : $('#prNmode').val(),
			companyId : companyId
		}
		
		console.log(JSON.stringify(remit));
		$.ajax({
			url:root + "/AFW-I-System/new/remit/add",
			type:'post',
			data : JSON.stringify(remit),
			dataType : 'json',
			contentType: 'application/json; charset=UTF-8',
			success : function(data) {
				console.log(data);
				if(data.status == 'success') {
					$('#remitClose').click();
					swal("新增成功!", "", "success");
					setTimeout(function() {
						location.reload();
					}, 1000);
				} else {
					alert(data.message);
				}
			},
			error : function(e) {
				alert("something error");
				console.log("ERROR: ", e);
			},
			done : function(e) {
				console.log("DONE");
			}
		});
	}
	
	var createContract = function() {
		var contract = {
			//userId : $('#pcNUser').val(),
			userId : 5,
   	   		userId2 : $('#pcNUserc').val(),
   	   		contractType : $('#pcNType').val(),
   	   		contractDate : $('#pcNdatesign').val(),
   	   		contractStart : $('#pcNDates').val(),
   	   		contractEnd : $('#pcNDatee').val(),
   	   		contractRent : $('#pNRent').val(),
   	   		contractDeposit : $('#pNDeposit').val(),
   	   		contractRented : $('#pNRented').val(),
   	   		contractDeposited : $('#pNDeposited').val(),
   	   		contractRemarks : $('#pNcommentc').val(),
   	   		officeNumber : $('#pcofficeNum').val(),
   	   		companyId : companyId
	   	}
		
		console.log(JSON.stringify(contract));
		$.ajax({
			url:root + "/AFW-I-System/new/contract/add",
			type:'post',
			data : JSON.stringify(contract),
			dataType : 'json',
			contentType: 'application/json; charset=UTF-8',
			success : function(data) {
				console.log(data);
				if(data.status == 'success') {
					$('#contractClose').click();
					swal("新增成功!", "", "success");
					setTimeout(function() {
						location.reload();
					}, 1000);
				} else {
					alert(data.message);
				}
			},
			error : function(e) {
				alert("something error");
				console.log("ERROR: ", e);
			},
			done : function(e) {
				console.log("DONE");
			}
		});
	}
	
	//TODO
	var setUser = function() {
		
	}
	
    var getAllUserAjax = function() {
    	$.ajax({
			url:root + "/AFW-I-System/new/user/getAllUser",
			type:'get',
			dataType : 'json',
			contentType: 'application/json',
			success : function(response) {
				//alert("success");
				console.log("getAllUserAjax:" + response.message);
				if(response.status == 'success') {
					setUserToContractDropDown(response.message);
				}
			},
			error : function(e) {
				alert("error");
				console.log("ERROR: ", e);
			},
			done : function(e) {
				console.log("DONE");
			}
		});
    }
	
    var setUserToContractDropDown = function(data) {
    	var obj = jQuery.parseJSON(data);
    	$("#pcNUserc").append($("<option></option>")
				.attr("value", -1).text('請選擇'));
    	for(var i=0; i<obj.length; i++) {
    		if(obj[i].userName != 'Admin') {
	    		$("#pcNUser").append($("<option></option>")
	    				.attr("value", obj[i].userId).text(obj[i].userName));
	    		
	    		$("#pcNUserc").append($("<option></option>")
	    				.attr("value", obj[i].userId).text(obj[i].userName));
    		}
    	}
    }
    
    $('.updateStatus').on('click', function() {
    	var id = $('.updateStatus').attr('id');
    	$('#companyStatus').val(id);
    })
    
	var getUrlParameter = function getUrlParameter(sParam) {
	    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
	        sURLVariables = sPageURL.split('&'),
	        sParameterName,
	        i;

	    for (i = 0; i < sURLVariables.length; i++) {
	        sParameterName = sURLVariables[i].split('=');

	        if (sParameterName[0] === sParam) {
	            return sParameterName[1] === undefined ? true : sParameterName[1];
	        }
	    }
	};
	
	
	
  	//page load
    window.onload = function() {
    	id = getUrlParameter('id');
    	retriveDataAjax();
	};
	
})(jQuery)
		
		
</script>
  </body>
</html>
