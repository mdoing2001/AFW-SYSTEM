<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">
	
	<link rel="shortcut icon" href="img/logo.png">
	
	<title>Add Company Page</title>
	
	<!-- Bootstrap core CSS -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap-reset.css" rel="stylesheet">
	<!--Animation css-->
	<link href="css/animate.css" rel="stylesheet">
	<!--Icon-fonts css-->
	<link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet" />
	<link href="assets/ionicon/css/ionicons.min.css" rel="stylesheet" />
    <!--Form Wizard-->
    <link rel="stylesheet" type="text/css" href="assets/form-wizard/jquery.steps.css" />
	<!-- Custom styles for this template -->
	<link href="css/style.css" rel="stylesheet">
	<link href="css/helper.css" rel="stylesheet">
	<link href="assets/timepicker/bootstrap-datepicker.min.css" rel="stylesheet" />
	
	<!-- HTML5 shim and Respond.js IE8 support of HTML5 tooltipss and media queries -->
	<!--[if lt IE 9]>
	  <script src="js/html5shiv.js"></script>
	  <script src="js/respond.min.js"></script>
	<![endif]-->
<style>
	.wizard > .content > .body
	{  
		position: relative;
		width: 95%;
		height: 95%;
		padding: 2.5%;
	}
	.wizard > .content > .body label {
    	margin-top: 0px;
	}
	.wizard > .steps > ul > li {
    	width: 33%;
	}
</style>
</head>
<body>
<!-- Aside Start-->
 	<aside class="left-panel">

	    <!-- brand -->
	    <div class="logo">
	        <a href="index.html" class="logo-expanded">
<!-- 	            <img src="img/logo.png" alt="logo"> -->
				<i class="ion-social-buffer"></i>
				<span class="nav-label">AFW_SYSTEM</span>
	        </a>
	    </div>
	    <!-- / brand -->
	
	    <!-- Navbar Start -->
	    <nav class="navigation">
	        <ul class="list-unstyled">
<!-- 	            <li><a href="index.html"><i class="ion-home"></i> <span class="nav-label">Dashboard</span></a></li> -->
<!-- 	            <li class="has-submenu"><a href="#"><i class="ion-flask"></i> <span class="nav-label">UI Elements</span></a> -->
<!-- 	                <ul class="list-unstyled"> -->
<!-- 	                    <li><a href="typography.html">Typography</a></li> -->
<!-- 	                    <li><a href="buttons.html">Buttons</a></li> -->
<!-- 	                    <li><a href="icons.html">Icons</a></li> -->
<!-- 	                    <li><a href="panels.html">Panels</a></li> -->
<!-- 	                    <li><a href="tabs-accordions.html">Tabs &amp; Accordions</a></li> -->
<!-- 	                    <li><a href="modals.html">Modals</a></li> -->
<!-- 	                    <li><a href="bootstrap-ui.html">BS Elements</a></li> -->
<!-- 	                    <li><a href="progressbars.html">Progress Bars</a></li> -->
<!-- 	                    <li><a href="notification.html">Notification</a></li> -->
<!-- 	                    <li><a href="sweet-alert.html">Sweet-Alert</a></li> -->
<!-- 	                </ul> -->
<!-- 	            </li> -->
<!-- 	            <li class="has-submenu"><a href="#"><i class="ion-settings"></i> <span class="nav-label">Components</span><span class="badge bg-success">New</span></a> -->
<!-- 	                <ul class="list-unstyled"> -->
<!-- 	                    <li><a href="grid.html">Grid</a></li> -->
<!-- 	                    <li><a href="portlets.html">Portlets</a></li> -->
<!-- 	                    <li><a href="widgets.html">Widgets</a></li> -->
<!-- 	                    <li><a href="nestable-list.html">Nesteble</a></li> -->
<!-- 	                    <li><a href="calendar.html">Calendar</a></li> -->
<!-- 	                    <li><a href="ui-sliders.html">Range Slider</a></li> -->
<!-- 	                </ul> -->
<!-- 	            </li> -->
	            <li class="has-submenu active"><a href="#"><i class="ion-compose"></i> <span class="nav-label">客戶資料</span></a>
	                <ul class="list-unstyled">
	                    <li class="active"><a href="addCompany.html">新增客戶合約</a></li>
	                    <li><a href="company.html">全部客戶</a></li>
	                    <li><a href="companyOffice.html">辦公室</a></li>
	                    <li><a href="companyPersonal.html">個人座位</a></li>
	                    <li><a href="companyRegister.html">登記</a></li>
	                    <li><a href="companyCC.html">聯絡處 & 停業</a></li>
	                    <li><a href="companyClose.html">退租</a></li>
	                </ul>
	            </li>
				<li class="has-submenu"><a href="#"><i class="ion-grid"></i> <span class="nav-label">收租</span></a>
	                <ul class="list-unstyled">
	                	<li><a href="searchRentTable.html">搜尋</a></li>
	                    <li><a href="rentTable.html">收租表</a></li>
	                </ul>
	            </li>
	        </ul>
	    </nav> 
	</aside>
	<!-- Aside Ends-->
	
	<!--Main Content Start -->
    <section class="content">
        <!-- Header -->
        <header class="top-head container-fluid">
        	<button type="button" class="navbar-toggle pull-left">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <!-- user login dropdown start-->
            <ul class="nav navbar-nav navbar-right top-menu top-right-menu">
	            <li class="dropdown text-center">
	                <a data-toggle="dropdown" class="dropdown-toggle" href="#">
	                    <img alt="" src="img/logo.png" class="img-circle profile-img thumb-sm">
	                    <span class="username" id="userName">AFW</span> <span class="caret"></span>
	                </a>
	                <ul class="dropdown-menu pro-menu fadeInUp animated" tabindex="5003" style="overflow: hidden; outline: none;">
	                    <li><a href="#" id="logOut"><i class="fa fa-sign-out"></i> Log Out</a></li>
	                </ul>
	            </li>
            </ul>
        </header>
        <!-- Header Ends -->
        
        <div class="wraper container-fluid">
	        <div class="page-title"> 
	            <h3 class="title">新增客戶合約</h3> 
	        </div>
	        <div class="row">
	            <div class="col-sm-12">
	                <div class="panel panel-default">
	                    <div class="panel-heading"><h3 class="panel-title">基本資料</h3></div>
	                    	<div class="panel-body">
	                    		<div class="form">
								<form class="cmxform form-horizontal tasi-form" id="company-form" novalidate="novalidate">
									<div>
									<h3>基本資料</h3>
									<section>
										<div class="form-group ">
		                                    <label for="cname" class="control-label col-lg-2">公司名稱 *</label>
		                                    <div class="col-lg-10">
		                                        <input class=" form-control" id="cname" name="name" type="text">
		                                    </div>
		                                </div>
		                                <div class="form-group ">
		                                    <label for="ctype" class="control-label col-lg-2">行業別</label>
		                                    <div class="col-lg-10">
		                                        <input class=" form-control" id="ctype" name="ctype" type="text">
		                                    </div>
		                                </div>
		                                <div class="form-group ">
		                                    <label for="cAddress" class="control-label col-lg-2">公司地址</label>
		                                    <div class="col-lg-10">
		                                        <input class="form-control " id="cAddress" name="cAddress">
		                                    </div>
		                                </div>
		                                <div class="form-group ">
		                                    <label for="cemail" class="control-label col-lg-2">E-Mail</label>
		                                    <div class="col-lg-10">
		                                        <input class="form-control " id="cemail" type="email" name="email">
		                                    </div>
		                                </div>
		                                <div class="form-group">
		                                	<!-- TODO Hard Code -->
		                                	<label for="cbranch" class="control-label col-lg-2">登記地 *</label>
		                                	<div class="col-lg-10">
			                                	<select class="form-control" id="cbranch" name="cbranch">
			                                		<option value="">請選擇</option>
					                          		<option value="221">微風店</option>
					                          		<option value="169">敦化店</option>
					                          		<option value="222">大安店</option>
					                          		<option value="295">忠孝店</option>
					                          		<option value="201">復興店</option>
					                          		<option value="189">南京店</option>
			                                	</select>
		                                	</div>
		                                </div>
		                                <div class="form-group">
		                                	<label for="cein" class="control-label col-lg-2">統編</label>
		                                	<div class="col-lg-10">
		                                        <input class="form-control " id="cein" name="cein" type="text">
		                                    </div>
		                                </div>
		                                <div class="form-group ">
		                                    <label for="cceo" class="control-label col-lg-2">負責人 *</label>
		                                    <div class="col-lg-10">
		                                        <input class=" form-control" id="cceo" name="cceo" type="text">
		                                    </div>
		                                </div>
		                                <div class="form-group ">
		                                    <label for="cbirthday" class="control-label col-lg-2">負責人生日</label>
		                                    <div class="col-lg-10">
		                                        <input class=" form-control" id="cbirthday" name="cbirthday" type="text" placeholder="yyyy-mm-dd">
		                                    </div>
		                                </div>
		                                <div class="form-group ">
		                                    <label for="cphoneNumber" class="control-label col-lg-2">電話 *</label>
		                                    <div class="col-lg-10">
		                                        <input class=" form-control" id="cphoneNumber" name="cphoneNumber" type="text">
		                                    </div>
		                                </div>
		                                <div class="form-group ">
		                                    <label for="cphoneNumber2" class="control-label col-lg-2">聯絡電話</label>
		                                    <div class="col-lg-10">
		                                        <input class=" form-control" id="cphoneNumber2" name="cphoneNumber2" type="text">
		                                    </div>
		                                </div>
		                                <div class="form-group ">
		                                    <label for="cline" class="control-label col-lg-2">Line</label>
		                                    <div class="col-lg-10">
		                                        <input class=" form-control" id="cline" name="cline" type="text">
		                                    </div>
		                                </div>
		                                <div class="form-group ">
		                                    <label for="cfaxNumber" class="control-label col-lg-2">傳真</label>
		                                    <div class="col-lg-10">
		                                        <input class=" form-control" id="cfaxNumber" name="cfaxNumber" type="text">
		                                    </div>
		                                </div>
		                                <div class="form-group ">
		                                    <label for="cAddress2" class="control-label col-lg-2">轉寄地址</label>
		                                    <div class="col-lg-10">
		                                        <input class="form-control " id="cAddress2" name="cAddress2" type="text">
		                                    </div>
		                                </div>
		                                <div class="form-group ">
		                                    <label for="ccomment" class="control-label col-lg-2">附註</label>
		                                    <div class="col-lg-10">
		                                        <textarea class="form-control " id="ccomment" name="comment"></textarea>
		                                    </div>
		                                </div>
<!-- 		                                <div class="form-group"> -->
<!-- 		                                    <div class="col-lg-offset-2 col-lg-10"> -->
<!-- 		                                        <button class="btn btn-success" id="companySave" type="button">Save</button> -->
<!-- 		                                        <button class="btn btn-default" type="button">Cancel</button> -->
<!-- 		                                    </div> -->
<!-- 		                                </div> -->
	                                   	</section>
	                                    <h3>合約</h3>
	                                    <section>
	                                    <div class="form-group">
	                                    	<!-- TODO 抓取session的user 名稱 -->
		                                    <label for="ccuser" class="control-label col-lg-2">簽約人 *</label>
		                                    <div class="col-lg-10">
		                                        <select class="form-control" id="ccuser" name="ccuser">
		                                    		<option value="">請選擇</option>
		                                    	</select>
		                                    </div>
		                                </div>
		                                <div class="form-group">
		                                	<!-- TODO ajax from ContractController -->
		                                    <label for="ccuserc" class="control-label col-lg-2">介紹人</label>
		                                    <div class="col-lg-10">
		                                    	<select class="form-control" id="ccuserc" name="ccuserc">
		                                    		<option value="-1">請選擇</option>
		                                    	</select>
		                                    </div>
		                                </div>
		                                <div class="form-group">
		                                	<!-- TODO Hard Code -->
		                                	<label for="cctype" class="control-label col-lg-2">類型 *</label>
		                                	<div class="col-lg-10">
			                                	<select class="form-control" id="cctype" name="cctype">
			                                		<option value="">請選擇</option>
			                                		<option value="o">辦公室</option>
			                                		<option value="p">個人座位</option>
			                                		<option value="r">登記</option>
			                                		<option value="c">聯絡處</option>
			                                		<option value="s">停業</option>
			                                		<option value="other">其他</option>
			                                	</select>
		                                	</div>
		                                </div>
		                                <div class="form-group">
		                                	<label for="ccOfficeNumber" class="control-label col-lg-2">辦公室號碼</label>
		                                	<div class="col-lg-10">
		                                        <input class="form-control " id="ccOfficeNumber" name="ccOfficeNumber" type="text">
		                                    </div>
		                                </div>
		                                <div class="form-group">
                                            <label class="col-lg-2 control-label " for="ccdatesign">簽約日期 *</label>
                                            <div class="col-lg-10">
                                            	<div class="input-group">
                                            		<input type="text" id="ccdatesign" name="ccdatesign" class="form-control" placeholder="yyyy-mm-dd">
													<span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                            	</div>
											</div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-lg-2 control-label " for="ccdates">合約日期(起) *</label>
                                            <div class="col-lg-10">
                                            	<div class="input-group">
                                            		<input type="text" id="ccdates" name="ccdates" class="form-control" placeholder="yyyy-mm-dd">
													<span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                            	</div>
											</div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-lg-2 control-label " for="ccdatee">合約日期(終) *</label>
                                            <div class="col-lg-10">
                                            	<div class="input-group">
                                            		<input type="text" id="ccdatee" name="ccdatee" class="form-control" placeholder="yyyy-mm-dd">
													<span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                            	</div>
											</div>
                                        </div>
                                        <div class="form-group">
		                                	<label for="crent" class="control-label col-lg-2">租金 *</label>
		                                	<div class="col-lg-10">
		                                        <input class="form-control " id="crent" name="crent" type="text">
		                                    </div>
		                                </div>
		                                <div class="form-group">
		                                	<label for="cdeposit" class="control-label col-lg-2">押金 *</label>
		                                	<div class="col-lg-10">
		                                        <input class="form-control " id="cdeposit" name="cdeposit" type="text">
		                                    </div>
		                                </div>
		                                <div class="form-group">
		                                	<label for="crented" class="control-label col-lg-2">已收租金</label>
		                                	<div class="col-lg-10">
		                                        <input class="form-control " id="crented" name="crented" type="text">
		                                    </div>
		                                </div>
		                                <div class="form-group">
		                                	<label for="cdeposited" class="control-label col-lg-2">已收押金</label>
		                                	<div class="col-lg-10">
		                                        <input class="form-control " id="cdeposited" name="cdeposited" type="text">
		                                    </div>
		                                </div>
		                                <div class="form-group">
		                                    <label for="ccommentc" class="control-label col-lg-2">附註</label>
		                                    <div class="col-lg-10">
		                                    	<textarea class="form-control " id="ccommentc" name="ccommentc"></textarea>
		                                    </div>
			                           	</div>
	
	                                    </section>
	                                    <h3>會計師資料</h3>
	                                    <section>
	                                        <div class="form-group ">
			                                    <label for="caName" class="control-label col-lg-2">事務所名稱</label>
			                                    <div class="col-lg-10">
			                                        <input class=" form-control" id="caName" name="caName" type="text">
			                                    </div>
		                                	</div>
		                                	<div class="form-group ">
			                                    <label for="caContact" class="control-label col-lg-2">聯絡人</label>
			                                    <div class="col-lg-10">
			                                        <input class=" form-control" id="caContact" name="caContact" type="text">
			                                    </div>
		                                	</div>
		                                	<div class="form-group ">
			                                    <label for="caPhoneNumber" class="control-label col-lg-2">電話</label>
			                                    <div class="col-lg-10">
			                                        <input class=" form-control" id="caPhoneNumber" name="caPhoneNumber" type="text">
			                                    </div>
		                                	</div>
		                                	<div class="form-group ">
			                                    <label for="caAddress" class="control-label col-lg-2">地址</label>
			                                    <div class="col-lg-10">
			                                        <input class=" form-control" id="caAddress" name="caAddress" type="text">
			                                    </div>
		                                	</div>
	                                    </section>
									</div>
								</form>
							</div> <!-- .form -->
	                    </div> <!-- panel-body -->
	                </div> <!-- panel -->
	            </div> <!-- col -->
	        </div> <!-- End row -->
        </div>
        
        <!-- Footer Start -->
        <footer class="footer">
            2016 © AFW.
        </footer>
        <!-- Footer Ends -->
	</section>




<!-- js placed at the end of the document so the pages load faster -->
<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/pace.min.js"></script>
<script src="js/wow.min.js"></script>
<script src="js/jquery.nicescroll.js" type="text/javascript"></script>
<!--form validation-->
<script type="text/javascript" src="assets/jquery.validate/jquery.validate.min.js"></script>
<!--form validation init-->
<script src="assets/jquery.validate/form-validation-init.js"></script>
<!--Form Wizard-->
<script src="assets/form-wizard/jquery.steps.min.js" type="text/javascript"></script>
<script type="text/javascript" src="assets/jquery.validate/jquery.validate.min.js"></script>
<!--wizard initialization-->
<script src="assets/form-wizard/wizard-init.js" type="text/javascript"></script>
<script src="js/jquery.app.js"></script>

<script src="assets/timepicker/bootstrap-datepicker.js"></script>

<script type="text/javascript">
(function($){
// 	$('#companySave').on('click', function() {
// 	    $("#company2-form").valid();
// 	});
 	
	var form = $("#company-form");
	form.validate({
	    errorPlacement: function errorPlacement(error, element) { element.after(error); },
	    rules: {
         	name: "required",
            email: {
                email: true
            },
			cbranch: "required",
			cceo: "required",
            cphoneNumber: {
            	required: true,
            	minlength:9,
            },
 			ccuser: "required",
			ccdatesign : "required",
			ccdates: "required",
            ccdatee: {
            	required: true,
            	isAfterStartDate: true
            },
            crent: {
            	required: true,
            	digits: true
            },
            cdeposit: {
            	required: true,
            	digits: true
            },
			cctype: "required"
        },
        messages: {
        	name: "請輸入公司名稱",
            email: {
            	email: "格式錯誤"
            },
            agree: "Please accept our policy",
            cbranch: "請選擇簽約分店",
            cAddress: "請輸入地址",
            cOfficeNumber: {
            	digits: "格式錯誤"
            },
            cein: {
            	required: "請輸入統編",
            	digits: "格式錯誤"
            },
            cceo: "請輸入負責人",
            cphoneNumber: {
            	required: "請輸入電話",
            	minlength: "長度錯誤",
            },
            cbirthday: {
            	date: "格式錯誤"
            },
            ccuser: "請選擇簽約人",
            ccdatesign: "請輸入日期",
            ccdates: "請輸入日期",
            ccdatee: {
            	required: "請輸入日期",
            	isAfterStartDate: "不能小於合約起始日期"
            },
            crent: {
            	required: "請輸入租金",
            	digits: "格式錯誤"
            },
            cdeposit: {
            	required: "請輸入押金",
            	digits: "格式錯誤"
            },
            caPhoneNumber: {
            	minlength: "長度錯誤",
            	digits: "格式錯誤"
            },
            cctype: "請選擇簽約類型"
//            cAddress2: "請輸入轉寄地址"
        }
	});
	form.children("div").steps({
	    headerTag: "h3",
	    bodyTag: "section",
	    transitionEffect: "slideLeft",
	    onStepChanging: function (event, currentIndex, newIndex)
	    {
	        form.validate().settings.ignore = ":disabled,:hidden";
	        return form.valid();
	    },
	    onFinishing: function (event, currentIndex)
	    {
	        form.validate().settings.ignore = ":disabled";
	        return form.valid();
	    },
	    onFinished: function (event, currentIndex)
	    {
	        //alert("Submitted!");
	        //window.location.href="company.html";
	    	addAjax();
	    }
	});
	
	
	
	//validate endDate > startDate
	var isAfterStartDate = function(startDateStr, endDateStr) {
	    var sDate = new Date(startDateStr);
	    var eDate = new Date(endDateStr);
	
	    if(sDate > eDate) {
	        return false;
	    }
		return true;
	};
	
	jQuery.validator.addMethod("isAfterStartDate", function(value, element) {
		return isAfterStartDate($('#ccdates').val(), $('#ccdatee').val());
    }, "End date should be after start date");
	//validate endDate > startDate
	
	// Date Picker
    $('#ccdates').datepicker({
        format: 'yyyy-mm-dd',
        onClose: function() {
            $('#ccdates').valid();
        },
        autoclose: true
    });
	
    $('#ccdatee').datepicker({
        format: 'yyyy-mm-dd',
        autoclose: true
    });
    
    $('#cbirthday').datepicker({
        format: 'yyyy-mm-dd',
        autoclose: true
    });
    
    $('#ccdatesign').datepicker({
        format: 'yyyy-mm-dd',
        autoclose: true
    });
 	// Date Picker
 	
 	
    
 	
    var root = location.protocol + '//' + location.host;
 	
    var addAjax = function() {
    	var company = {
   	   		companyName : $('#cname').val(),
   	   		companyType : $('#ctype').val(),
   	   		companyAddress : $('#cAddress').val(),
   	   		companyMail : $('#cemail').val(),
   	   		companyCode : $('#cbranch').val(),
   	   		companyEin : $('#cein').val(),
   	   		companyExecutive : $('#cceo').val(),
   	   		companyBitrhday : $('#cbirthday').val(),
   	   		companyNumber : $('#cphoneNumber').val(),
   	   		companyNumber2 : $('#cphoneNumber2').val(),
   	 		companyLine : $('#cline').val(),
   	   		companyFax : $('#cfaxNumber').val(),
   	   		companyAddress2 : $('#cAddress2').val(),
   	   		companyRemark : $('#ccomment').val()
   		}
   	        
   		var contract = {
   	   		userId : $('#ccuser').val(),
   	   		userId2 : $('#ccuserc').val(),
   	   		contractType : $('#cctype').val(),
   	   		contractDate : $('#ccdatesign').val(),
   	   		contractStart : $('#ccdates').val(),
   	   		contractEnd : $('#ccdatee').val(),
   	   		contractRent : $('#crent').val(),
   	   		contractDeposit : $('#cdeposit').val(),
   	   		contractRented : $('#crented').val(),
   	   		contractDeposited : $('#cdeposited').val(),
   	   		contractRemarks : $('#ccommentc').val()
   		}
   	    
   	    var officeNumber = {
   			officeNumber : $('#ccOfficeNumber').val()
   	    };
   	        
   	    var accountancy = {
   	   		accName : $('#caName').val(),
   	   		accContact : $('#caContact').val(),
   	   		accPhone : $('#caPhoneNumber').val(),
   	   		accAddress : $('#caAddress').val()
   	    }
   	    
    	var newData = {
			'company' : company,
			'contract' : contract,
   			'office' : officeNumber,
  			'acc' :accountancy
    	}
    	console.log(JSON.stringify(newData));
		$.ajax({
			url:root + "/AFW-I-System/new/company/add",
			type:'post',
			data : JSON.stringify(newData),
			dataType : 'json',
			contentType: 'application/json; charset=UTF-8',
			success : function(data) {
				//alert("success");
				console.log(data);
				if(data.status == 'success') {
					var id = data.companyId;
					window.location.href = root + "/AFW-I-System/companyProfile.html?id=" + id;
				} else {
					alert(data.message);
				}
				
			},
			error : function(e) {
				alert("error");
				console.log("ERROR: ", e);
			},
			done : function(e) {
				console.log("DONE");
			}
		});
    }
    
    var getAllUserAjax = function() {
    	$.ajax({
			url:root + "/AFW-I-System/new/user/getAllUser",
			type:'get',
			dataType : 'json',
			contentType: 'application/json',
			success : function(response) {
				//alert("success");
				console.log("getAllUserAjax:" + response.message);
				if(response.status == 'success') {
					setUserToDropDown(response.message);
				}
			},
			error : function(e) {
				alert("error");
				console.log("ERROR: ", e);
			},
			done : function(e) {
				console.log("DONE");
			}
		});
    }
    
    var setUserToDropDown = function(data) {
    	var obj = jQuery.parseJSON(data);
    	for(var i=0; i<obj.length; i++) {
    		if(obj[i].userName != 'afwadmin') {
    			$("#ccuser").append($("<option></option>")
        				.attr("value", obj[i].userId).text(obj[i].userName));
    			
    			$("#ccuserc").append($("<option></option>")
        				.attr("value", obj[i].userId).text(obj[i].userName));
    		}
    	}
    	$("#ccuserc").append($("<option></option>")
				.attr("value", 'acc').text("會計師"));
    }
    
    $('#logOut').on('click', function() {
    	logOut();
    })
    
    var logOut = function() {
    	$.ajax({
			url:root + "/AFW-I-System/new/user/logout",
			type:'get',
			dataType : 'json',
			contentType: 'application/json',
			success : function(response) {
				//alert("success");
				if(response.status == 'success') {
					window.location.href = root + "/AFW-I-System/login.html";
				}
			},
			error : function(e) {
				alert("error");
				console.log("ERROR: ", e);
			},
			done : function(e) {
				console.log("DONE");
			}
		});
    }
    
    //page load
    window.onload = function() {
		getAllUserAjax();
	};
})(jQuery);
</script>
</body>
</html>